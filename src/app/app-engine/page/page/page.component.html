<a *ngIf="pageAsDemo" href="https://github.com/nie-ine/NIE-OS.git" class="github-corner"
   aria-label="View source on GitHub">
  <svg width="80" height="80" viewBox="0 0 250 250"
       style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path
      d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
      fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path
      d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
      fill="currentColor" class="octo-body"></path>
  </svg>
</a>
<style>.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out
}

@keyframes octocat-wave {
  0%, 100% {
    transform: rotate(0)
  }
  20%, 60% {
    transform: rotate(-25deg)
  }
  40%, 80% {
    transform: rotate(10deg)
  }
}

@media (max-width: 500px) {
  .github-corner:hover .octo-arm {
    animation: none
  }

  .github-corner .octo-arm {
    animation: octocat-wave 560ms ease-in-out
  }
}</style>

<app-load-variables
  (sendPageBack)="receivePage( $event )"
  (sendOpenAppsInThisPageBack)="receiveOpenAppsInThisPage( $event )"
  [reload]="reloadVariables">

</app-load-variables>

<app-data-assignment
  [index]="index"
  [openAppsInThisPage]="openAppsInThisPage"
  [appInputQueryMapping]="page.appInputQueryMapping"
  [response]="response"
  [queryId]="queryId"
  [depth]="depth"
  [pathWithArray]="pathWithArray"
  (sendAppTypesBackToNIEOS)="receiveOpenAppsInThisPage( $event )">

</app-data-assignment>


<!-- Publish Option Expansion Panel -->
<div style="vertical-align: bottom; ">

  <div style="position: fixed; width: 100%;">
    <button
      type="button"
      mat-button
      (click)="openPageMenu()" style="margin-top: 15px; ">
      <img
        [src]=" lightHouse ?  '../../../../assets/img/logo_transparent.png' : '../../../../assets/img/logo_transparent2.png'"
        style="width: 40px; margin-bottom: 2px; vertical-align: bottom;" matTooltip="inseri apps">
    </button>
    <button *ngIf="pagesOfThisActtion"
            [disabled]="selectedPage === 0"
            mat-button
            (click)="selectPage( selectedPage - 1 , pagesOfThisActtion[ selectedPage - 1 ] )">
      <mat-icon> keyboard_arrow_left</mat-icon>
    </button>
    <button mat-button [matMenuTriggerFor]="menu5" *ngIf="pagesOfThisActtion">{{ page.title }}
    </button>
    <mat-menu #menu3="matMenu">
      <!--button
        style="display: block"
        [color]=" i === selectedPage ? 'primary' : 'null'"
        *ngFor="let page of pagesOfThisActtion; let i = index;"
        matTooltip="{{ page.description }}"
        mat-button
        (click)="selectPage( i, page )">{{ page.title }}</button-->
      <button
        style="display: block"
        *ngFor="let page of pagesOfThisActtion; let i = index;"
        [ngStyle]="{'color' : i === selectedPage ? 'blue' : 'black' }"
        matTooltip="{{ page.description }}"
        [matMenuTriggerFor]="menu5"
        mat-menu-item (click)="selectSubPages(page); ">{{ page.title }}</button>
      <mat-button-toggle-group
        name="fontStyle"
        *ngIf=" (!pageAsDemo) && !preview && loggedIn"
        style="margin-left: 10px; margin-right: 10px; margin-top: 10px;">

        <mat-button-toggle (click)="addNewPage()" matTooltip="Add new page">
          <mat-icon>add</mat-icon>
        </mat-button-toggle>

        <mat-button-toggle (click)="addDuplicatedPage()" matTooltip="Copy and add existing page">
          <mat-icon>file_copy</mat-icon>
        </mat-button-toggle>

        <mat-button-toggle matTooltip="Link existing page" (click)="linkExistingPage()">
          <mat-icon>link</mat-icon>
        </mat-button-toggle>

      </mat-button-toggle-group>

    </mat-menu>
    <mat-menu #menu5="matMenu"[overlapTrigger]="false">

      <span *ngFor="let subPage of subPagesOfPage">
    <!-- Handle branch node buttons here -->
    <span *ngIf="subPage.subPages && subPage.subPages.length > 0">

      <div class="button-row">
      <button mat-icon-button matTooltip="Settings" [mat-menu-trigger-for]="menu6" ><mat-icon> settings</mat-icon></button>
     <button mat-button  [mat-menu-trigger-for]="menu.childMenu"> <!--color="primary"-->
       {{subPage.page.title}}
      </button>
    </div>

      <app-menu-item #menu [items]="subPage.subPages"></app-menu-item>
    </span>
        <!-- Leaf node buttons here -->
    <span *ngIf="!subPage.subPages || subPage.subPages.length === 0">
     <div class="button-row">
      <button mat-icon-button matTooltip="Settings" [mat-menu-trigger-for]="menu6" ><mat-icon> settings</mat-icon></button>
      <button mat-button  >
        {{subPage.page.title}}
      </button>
    </div>
    </span>
  </span>
      <mat-button-toggle-group
        name="fontStyle"
        *ngIf=" (!pageAsDemo) && !preview && loggedIn"
        style="margin-left: 10px; margin-right: 10px; margin-top: 10px;">

        <mat-button-toggle (click)="addNewPage()" matTooltip="Add new page">
          <mat-icon>add</mat-icon>
        </mat-button-toggle>

        <mat-button-toggle (click)="addDuplicatedPage()" matTooltip="Copy and add existing page">
          <mat-icon>file_copy</mat-icon>
        </mat-button-toggle>

        <mat-button-toggle matTooltip="Link existing page" (click)="linkExistingPage()">
          <mat-icon>link</mat-icon>
        </mat-button-toggle>

      </mat-button-toggle-group>

    </mat-menu>
    <mat-menu #menu6="matMenu">
     <button mat-menu-item (click)="navigateToOtherView();" matTooltip="Go to page">
       <mat-icon>navigate_next</mat-icon>
     </button>
     <button (click)="addNewSubPage();" matTooltip="Add new subpage">
       <mat-icon>add</mat-icon>
     </button>
   </mat-menu>

   <button [disabled]="selectedPage === pagesOfThisActtion.length - 1"
           *ngIf="pagesOfThisActtion"
           mat-button
           (click)="selectPage( selectedPage + 1 , pagesOfThisActtion[ selectedPage + 1 ] )">
     <mat-icon> keyboard_arrow_right</mat-icon>
   </button>

   <button mat-icon-button *ngIf=" (!pageAsDemo) && !preview && page.publishedAsTemplate"
           style="color: #4cae4c!important;" matTooltip="This page is published as a template!"
           [matMenuTriggerFor]="menu4">
     <mat-icon style="margin-right: 10px">arrow_circle_up</mat-icon>
   </button>

   <mat-menu #menu4="matMenu">
     <button mat-menu-item (click)="undoPublishTemplate()" (click)="page.publishedAsTemplate = false">Undo</button>
     <button mat-menu-item (click)="filePicker.click()">Add Profile Photo</button>
     <input type="file" class="form-control" name="profilePic" #filePicker (change)="addProfilePhoto($event)"
            style="visibility: hidden;height: 0px">
   </mat-menu>


   <button mat-button style="float: right; margin-top: 4px;"
           *ngIf="pageIsPublished && loggedIn"
           matTooltip='Page is published'>
     <mat-icon>public</mat-icon>
   </button>
   <div *ngFor="let app of openAppArray; let i = index;">
     <div
       *ngIf="( !preview || showAppSettingsOnPublish ) && innerWidth > page.chosenWidth && app.type !== 'pageMenu' && !page.tiles">
       <button
         mat-button
         [matMenuTriggerFor]="menu"
         style="vertical-align: bottom;"
         *ngIf="!app.showContent">
         <mat-icon>{{ openApps.openApps[app.type].materialIcon }}</mat-icon>
         {{ i }}</button>
       <mat-menu #menu="matMenu">
         <button mat-menu-item (click)="app.showContent = true" (click)="app.initialized = true">
           Show {{ app.title || app.type + i }}</button>
         <button mat-menu-item (click)=" closeApp( app.hash, i ) ">Remove this app</button>
       </mat-menu>
     </div>
   </div>
 </div>


 <div style=" position: fixed; bottom: 0; left: 0; z-index: 200; overflow-x: auto; margin-top: 70px; width: 300px;"
      *ngIf="preview && loggedIn">
   <mat-expansion-panel [ngStyle]="{
         'height': publishedOptionsExpanded ? '500px' : '',
         'overflow': publishedOptionsExpanded ? 'auto' : '' }">
     <mat-expansion-panel-header (click)="publishedOptionsExpanded = !publishedOptionsExpanded">
       <mat-panel-title>
         Publish Options
       </mat-panel-title>
     </mat-expansion-panel-header>

     <mat-form-field class="example-full-width">
       <mat-label>Shortname</mat-label>
       <input #shortname matInput placeholder="Choose URL segment" value="{{ action.shortName }}"
              (keyup)="checkIfShortNameExist( shortname.value )">
       <mat-icon matSuffix>{{ shortNameExist === false ? 'done' : 'clear' }}</mat-icon>
     </mat-form-field>

     <span *ngIf="shortNameExist === true"> Shortname exist, please choose another one </span>

     <button mat-button *ngIf="shortNameExist === false" (click)="setShortName()"> Set Shortname</button>

     <mat-divider style="margin-top: 10px; margin-bottom: 10px;"></mat-divider>
     <button mat-button *ngIf="!pageIsPublished" (click)="publishPageOrMakePagePrivate( true )">
       <mat-icon>publish</mat-icon>
       Publish Page
     </button>
     <button mat-button *ngIf="pageIsPublished" (click)="publishPageOrMakePagePrivate( false )">
       <mat-icon>fingerprint</mat-icon>
       Make page private again
     </button>
   </mat-expansion-panel>
 </div>


 <!-- Data Chooser -->
  <div style=" position: fixed; bottom: 0; right: 0; z-index: 200; overflow-x: auto; margin-top: 70px;"
       *ngIf="openAppsInThisPage[ 'dataChooser' ].model.length > 0 ">
    <mat-expansion-panel style="float: right;" [disabled]="preview && !showDataBrowserOnPublish"
                         [ngStyle]="{ 'width': !(preview && !showDataBrowserOnPublish) ? '300px' : '0px'}">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Data Browser
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngFor="let dataChooser of openAppsInThisPage[ 'dataChooser' ].model; let i = index;">
        <div *ngIf="openAppsInThisPage[ 'dataChooser' ].model[i].queryId !== undefined">
          <button
            *ngIf=" openAppsInThisPage[ 'dataChooser' ].model[i].title && openAppsInThisPage[ 'dataChooser' ].model[i].title.search( 'Query: ' ) !== -1 "
            (click)="openQueryInformationDialog( openAppsInThisPage[ 'dataChooser' ].model[i].queryId )"
            mat-button matTooltip="{{openAppsInThisPage[ 'dataChooser' ].model[i].title}}">
            {{ openAppsInThisPage['dataChooser'].model[i].title }}
          </button>
          <app-data-chooser
            [page]="page"
            [response]="openAppsInThisPage[ 'dataChooser' ].model[i].response"
            [queryId]="openAppsInThisPage[ 'dataChooser' ].model[i].queryId"
            [openAppsInThisPage]="openAppsInThisPage"
            [dataChooserEntries]="openAppsInThisPage[ 'dataChooser' ].model[i].dataChooserEntries"
            [description]=" openAppsInThisPage[ 'dataChooser' ].model[i].depth "
            [depth]="openAppsInThisPage[ 'dataChooser' ].model[i].depth"
            [pathWithArray]="openAppsInThisPage[ 'dataChooser' ].model[i].pathWithArray"
            (sendIndexBack)="updateMainResourceIndex( $event )">
          </app-data-chooser>
        </div>
      </div>
    </mat-expansion-panel>
  </div>


  <div *ngFor="let app of openAppArray; let i = index;">
    <popup #appId *ngIf="innerWidth > page.chosenWidth && !page.tiles && app.showContent"
           [app]="app"
           [pathsWithArrays]="app.pathsWithArrays"
           [showAppSettingsOnPublish]="!preview || showAppSettingsOnPublish"
           [preview]="preview && !showAppTitlesOnPublish"
           (sendTiledPositionBack)="updateTiledPosition( $event )"
           [position]="appFramePosition"
           (sendAppCoordinatesBack)="updateAppCoordinates($event)"
           (sendAppSettingsBack)="updateAppSettings($event)"
           (sendAssignInputCommandBack)="openAssignInputDialog($event)"
           (closeAppEmitter)="closeApp( app.hash, i )" (minimizeApp)="app.showContent = false;">
      <div [ngStyle]="{
          'height': app.fullHeight ? '100%' :  app.height + 'px',
          'width': app.fullWidth ? '100%' : app.width + 'px'}">

        <!--            <app-all-app-selectors-->
        <!--              [app]="app" (reloadVariables)="reloadVariablesFunction()"-->
        <!--              [appInputQueryMapping]="page.appInputQueryMapping"-->
        <!--              [i]="i"-->
        <!--              [(hoveredElement)]="hoveredElement">-->

        <!--            </app-all-app-selectors>-->

        <div *ngIf="pageAsDemo && app.type === 'pageMenu'">
          <h4>Tutorial Videos</h4>
          <button mat-button color="primary" (click)="addVideoApp( 'https://www.youtube.com/embed/9An1cGPrv9Q' )">
            <mat-icon>video_library</mat-icon>
            Watch Video "First steps in Inseri"
          </button>
          <h4 style="margin-top: 15px;">Apps</h4>
        </div>

        <mat-form-field style="width: 100%" *ngIf="app.type === 'pageMenu'">
          <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
        </mat-form-field>

        <div style="width: 100%" *ngIf="app.type === 'pageMenu'">
          <table mat-table [dataSource]="dataSource" matSort>

            <!-- ID Column -->
            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Icon</th>
              <td mat-cell *matCellDef="let row" (click)="addAnotherApp(row.appType, true, row.appType)"
                  style="cursor: pointer; width: 25%;">
                <button mat-button>
                  <mat-icon>{{row.id}}</mat-icon>
                </button>
              </td>
            </ng-container>

            <!-- Tag Column -->
            <ng-container matColumnDef="tags">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Tags</th>
              <td mat-cell *matCellDef="let row" (click)="addAnotherApp(row.appType, true, row.appType)"
                  style="cursor: pointer; width: 25%;"> {{row.tags}} </td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Name</th>
              <td mat-cell *matCellDef="let row"
                  (click)="addAnotherApp(row.appType, true, row.name)"
                  style="cursor: pointer; width: 25%;"> {{row.name}} </td>
            </ng-container>

            <!-- Color Column -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Status</th>
              <td mat-cell *matCellDef="let row" [style.color]="row.color"
                  (click)="addAnotherApp(row.appType, true, row.appType)" style="cursor: pointer; width: 25%;"
                  matTooltip="{{row.description}}"> {{row.status}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns" style="width: 100%;"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" style="width: 100%;"></tr>
          </table>

        </div>

      </div>
    </popup>
  </div>
</div>


<mat-card
  *ngFor="let app of openAppArray.slice(); let i = index;"
  style="display: inline-grid; margin-bottom: 10px; margin-left: 60px; margin-top: 70px;"
  [ngStyle]="{ 'width': ( app.fullWidth || app.panelExtended ) ? '92%' : app.width + 'px'}">


  <mat-card-header *ngIf=" !app.minimized ">

    <button mat-icon-button [matMenuTriggerFor]="menu2">
      <mat-icon>{{ this.openAppsInThisPage[app.type].materialIcon }}</mat-icon>
    </button>

    <mat-menu #menu2="matMenu">

      <button mat-menu-item (click)="appMenu( app, 'tileAndSize' )">
        Change Title and size
      </button>

      <button mat-menu-item (click)="appMenu( app, 'showDescription' )">
        Change app description
      </button>

      <button (click)="app.showArrows = app.showArrows ? false : true" mat-menu-item>
        {{ app.showArrows ? 'Hide move arrows' : 'Move app on page'}}
      </button>

      <button mat-menu-item (click)="appMenu( app, 'fileOptions' )">
        App Input Options
      </button>

      <button mat-menu-item (click)="openDataManagement()">
        Data Management
      </button>

      <button mat-menu-item *ngIf="app.hasOwnProperty('showSettings')" (click)="toggleShowInAppSettings( app, i )">
        <span *ngIf="app.showSettings">Close app settings</span>
        <span *ngIf="!app.showSettings">Show app settings</span>
      </button>

      <button mat-menu-item (click)="appMenu( app, 'minimize' )">
        Minimize
      </button>

      <button mat-menu-item (click)="appMenu( app, 'close' )">
        Close
      </button>

    </mat-menu>

    <button
      mat-button
      *ngIf=" (!pageAsDemo) && !preview && loggedIn && app.showArrows"
      (click)="switchAppTilePosition(i, i-1)" [disabled]="i === 0">
      <mat-icon>arrow_left</mat-icon>
    </button>

    <button mat-button *ngIf=" (!pageAsDemo) && !preview && loggedIn && app.showArrows"
            (click)="switchAppTilePosition(i, i+1)" [disabled]="i === openAppArray.length - 1">
      <mat-icon>arrow_right</mat-icon>
    </button>

  </mat-card-header>
  <mat-card-content style="pointer-events: auto!important;"
                    *ngIf=" !app.minimized && !app.panelExtended" [style.overflow]="'auto'"
                    [ngStyle]="{ 'height':  ( app.fullHeight || app.panelExtended ) ? '92%' : app.height + 'px'}">

    <div *ngIf="app.hasOwnProperty('showSettings')">
      <button mat-raised-button color="primary" *ngIf="app.showSettings" (click)="toggleShowInAppSettings( app, i )">
        Close app settings
      </button>
    </div>

    <app-all-app-selectors
      [i]="i"
      [app]="app"
      (reloadVariables)="reloadVariablesFunction()"
      [appInputQueryMapping]="page.appInputQueryMapping"
      [(hoveredElement)]="hoveredElement">

    </app-all-app-selectors>

    <mat-form-field *ngIf="app.type === 'pageMenu'" style="width: 100%">
      <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search all appgroups">
    </mat-form-field>

    <div *ngIf="app.type === 'pageMenu'" style="height: 400px">

      <mat-tab-group *ngIf="dataSource === undefined ||  !(dataSource.filter && dataSource.filter.length > 0)">

        <mat-tab label="Admin">
          <button mat-button (click)="goToDashBoard()" *ngIf=" (!pageAsDemo) && !preview" style="margin-top: 10px">
            <mat-icon matTooltip="back to dashboard" style="margin-right: 10px">home</mat-icon>
            Dashboard
          </button>
          <br>
          <button mat-button *ngIf=" (!pageAsDemo) && !preview" (click)="updatePage()">
            <mat-icon matTooltip="save page" style="margin-right: 10px">save</mat-icon>
            Save Page
          </button>
          <br>
          <button mat-button *ngIf=" (!pageAsDemo) && !preview" (click)="reloadVariablesFunction()">
            <mat-icon style="margin-right: 10px">update</mat-icon>
            Reload Page
          </button>
          <div *ngFor="let app of appMenuModel">
            <button mat-button *ngIf="app.appGroup === 'admin'" (click)="addAnotherApp(app.appType, true, app.appType)">
              <mat-icon style="margin-right: 10px">{{app.id}}</mat-icon>
              {{app.name}}
            </button>
          </div>
          <button mat-button (click)="goToPageSet()" *ngIf="route.snapshot.queryParams.page && !preview">
            <mat-icon style="margin-right: 10px">list</mat-icon>
            Table of content
          </button>
          <br>
          <button mat-button *ngIf=" (!pageAsDemo) && !preview" (click)="logout()">
            <mat-icon matTooltip="{{ 'click to logout - ' + userInfo }}" style="margin-right: 10px">lock_open</mat-icon>
            Log out
          </button>
        </mat-tab>

        <mat-tab label="Add, Edit & Manage Data">
          <button mat-button *ngIf=" (!pageAsDemo) && !preview" (click)="openDataManagement()" style="margin-top: 10px">
            <mat-icon style="margin-right: 10px">zoom_out_map</mat-icon>
            Data management
          </button>
          <div *ngFor="let app of appMenuModel">
            <button mat-button *ngIf="app.appGroup === 'add'" (click)="addAnotherApp(app.appType, true, app.appType)">
              <mat-icon style="margin-right: 10px">{{app.id}}</mat-icon>
              {{app.name}}
            </button>
          </div>
        </mat-tab>

        <mat-tab label="Visualise">
          <div *ngFor="let app of appMenuModel" style="margin-top: 10px">
            <button mat-button *ngIf="app.appGroup === 'visualise'"
                    (click)="addAnotherApp(app.appType, true, app.appType)">
              <mat-icon style="margin-right: 10px">{{app.id}}</mat-icon>
              {{app.name}}
            </button>
          </div>
        </mat-tab>

        <mat-tab label="Microservice">
          <div *ngFor="let app of appMenuModel" style="margin-top: 10px">
            <button mat-button *ngIf="app.appGroup === 'microservice'"
                    (click)="addAnotherApp(app.appType, true, app.appType)">
              <mat-icon style="margin-right: 10px">{{app.id}}</mat-icon>
              {{app.name}}
            </button>
          </div>
        </mat-tab>

        <mat-tab label="Web Applications">
          <div *ngFor="let app of appMenuModel" style="margin-top: 10px">
            <button mat-button *ngIf="app.appGroup === 'application'"
                    (click)="addAnotherApp(app.appType, true, app.appType)">
              <mat-icon style="margin-right: 10px">{{app.id}}</mat-icon>
              {{app.name}}
            </button>
          </div>
        </mat-tab>

        <mat-tab label="Publish">
          <!--            <button mat-button *ngIf=" (!pageAsDemo) && !preview" (click)="updateTilePage()" >-->
          <!--              <mat-icon style="margin-right: 10px">dashboard</mat-icon> Windows or Tiles-->
          <!--            </button>-->
          <!--            <button mat-button *ngIf=" (!pageAsDemo) && !preview" (click)="showResponsiveWidthMenu = !showResponsiveWidthMenu" >-->
          <!--              <mat-icon style="margin-right: 10px">linear_scale</mat-icon> Tiles - Width: {{ page.chosenWidth }} px-->
          <!--            </button>-->
          <button mat-button *ngIf=" (!pageAsDemo) && !preview" (click)="publishAsTemplate()"
                  (click)="page.publishedAsTemplate = true">
            <mat-icon style="margin-right: 10px">arrow_circle_up</mat-icon>
            Publish as template
          </button>
          <br>
          <button
            mat-button
            *ngIf=" (!pageAsDemo) && loggedIn"
            (click)="preview = !preview">
            <mat-icon style="margin-right: 10px">
              nature_people
            </mat-icon>
            {{!preview ? 'Publish Preview' : 'Edit view'}}
          </button>
        </mat-tab>

      </mat-tab-group>

      <table mat-table [dataSource]="dataSource" matSort
             *ngIf="!(dataSource === undefined ||  !(dataSource.filter && dataSource.filter.length > 0)) ">

        <!-- ID Column -->
        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Icon</th>
          <td mat-cell *matCellDef="let row" (click)="addAnotherApp(row.appType, true, row.appType)"
              style="cursor: pointer;">
            <button mat-button>
              <mat-icon style="margin-right: 10px">{{row.id}}</mat-icon>
              {{row.name}}
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="responsiveColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: responsiveColumns;"></tr>
      </table>

    </div>

  </mat-card-content>

  <popup #appId *ngIf=" !app.minimized "
         [appIndex]="i"
         [app]="app"
         [pathsWithArrays]="app.pathsWithArrays"
         [showAppSettingsOnPublish]="!preview || showAppSettingsOnPublish"
         [preview]="false"
         (sendTiledPositionBack)="updateTiledPosition( $event )"
         [position]="'static'"
         [openAppArrayIndex]="i"
         (minimizeApp)="minimizeApp($event)"
         (sendAppCoordinatesBack)="updateAppCoordinates($event)"
         (sendAppSettingsBack)="updateAppSettings($event)"
         (sendAssignInputCommandBack)="openAssignInputDialog($event)"
         (closeAppEmitter)="closeApp( app.hash, i )"
         [tileAndSize]="app.tileAndSize"
         [fileOptions]="app.fileOptions"
         [description]="app.showDescription"
         [minimize]="app.minimize"
         [close]="app.close">

  </popup>

</mat-card>

<div
  [ngStyle]="{'border-left': '3px solid', 'height': '500px', 'margin-left': page.chosenWidth + 'px', 'color': 'C9D6FF'}"
  *ngIf="showResponsiveWidthMenu">

</div>

<mat-slider *ngIf="showResponsiveWidthMenu"
            style="width: 100%"
            [max]="innerWidth"
            [min]="0"
            [step]="10"
            [thumbLabel]="true"
            [(ngModel)]="page.chosenWidth">
</mat-slider>

<style>
  .i {
    color: #f7d336;
    position: relative;
  }

  .i:before {
    content: "Ä±";
    position: absolute;
    color: black;
  }
</style>

<div style=" position: fixed; top: 50%; left: 50%; margin-top: -100px; margin-left: -100px; z-index: -10000"
     class="text-center" *ngIf="!loggedIn || notFound">
  <h1 style="text-transform: none!important; font-size: 45px">
    <span class=" i i:before ">i</span>nser<span class=" i i:before ">i</span>
  </h1>
  <div
    class=" text-muted"
    style="margin-bottom: 30px !important; margin-top: 20px !important; font-style: italic; font-size:16px;">
    {{ slogan }}

    <br>

    {{ notFound ? 'The space "' + router.url.split('/')[1] + '" is free and could be yours' : '' }}

  </div>
</div>
